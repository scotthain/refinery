name: Release the refinery binaries
on:
  push:
    branches:
      - 'shain/**'
jobs:
  go-build:
    runs-on: ubuntu-latest, macos-latest
    steps:
      - name: Checkout
        uses: actions/checkout@v3
      - name: Go build
          run |
            GOOS=<< parameters.fos >> \
            GOARCH=<< parameters.arch >> \
            go build -ldflags "-X main.BuildID=${CIRCLE_TAG:-${CIRCLE_SHA1:0:7}}" \
            -o $GOPATH/bin/refinery-<< parameters.os >>-<< parameters.arch >> \
            ./cmd/refinery
